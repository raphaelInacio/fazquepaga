# Test properties
# This file can be used to override properties for the "test" profile.

# Allow bean definition overriding to resolve conflicts with auto-configured GCP beans
spring.main.allow-bean-definition-overriding=true

# Ensure emulators are used for tests
spring.cloud.gcp.firestore.emulator.enabled=true
spring.cloud.gcp.pubsub.emulator.enabled=true

# Point to the emulators defined in docker-compose.yml
# Note: When running tests from the IDE, the app might not be on the Docker network.
# We will rely on the environment variables from docker-compose for container-based tests,
# but for local IDE testing, these properties can be useful if you expose the ports.
# For now, we assume tests run in an environment where these are already configured (e.g., via docker-compose env vars).
spring.cloud.gcp.firestore.host-port=localhost:8081
spring.cloud.gcp.firestore.project-id=test-project
spring.cloud.gcp.pubsub.emulator-host=localhost:8085
spring.cloud.gcp.project-id=test-project

# Dummy API key for tests to avoid startup failure when GEMINI_API_KEY is missing
spring.ai.google.genai.api-key=dummy-key-for-tests

# Dummy Asaas Key for tests
asaas.api-key=dummy-asaas-key-for-tests

# Asaas Subscription Configuration
asaas.subscription.price=29.90
asaas.subscription.name=TaskAndPay Premium
asaas.subscription.cycle=MONTHLY
asaas.subscription.success-url=http://localhost:3000/app/settings?success=true
asaas.subscription.cancel-url=http://localhost:3000/app/settings?cancel=true

# JWT Configuration
jwt.secret=746573742D7365637265742D6B65792D666F722D756E69742D74657374732D6D757374
jwt.child-token-ttl-days=30

# Test properties
# This file can be used to override properties for the "test" profile.

# Allow bean definition overriding to resolve conflicts with auto-configured GCP beans
spring.main.allow-bean-definition-overriding=true

# Ensure emulators are used for tests
spring.cloud.gcp.firestore.emulator.enabled=true
spring.cloud.gcp.pubsub.emulator.enabled=true

# Point to the emulators defined in docker-compose.yml
# Note: When running tests from the IDE, the app might not be on the Docker network.
# We will rely on the environment variables from docker-compose for container-based tests,
# but for local IDE testing, these properties can be useful if you expose the ports.
# For now, we assume tests run in an environment where these are already configured (e.g., via docker-compose env vars).
spring.cloud.gcp.firestore.host-port=localhost:8081
spring.cloud.gcp.firestore.project-id=test-project
spring.cloud.gcp.pubsub.emulator-host=localhost:8085
spring.cloud.gcp.project-id=test-project

# Dummy API key for tests to avoid startup failure when GEMINI_API_KEY is missing
spring.ai.google.genai.api-key=dummy-key-for-tests
